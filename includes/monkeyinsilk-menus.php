<?php

function monkeyinsilk_settings_page()
{

    $svg = base64_encode('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1350.18 1502.17"><path d="M1361,377.61c-7.87-10.39-18.39-15.36-31.47-15.36-10.15,0-19.6,3.16-29.24,5.61-3.73,1-7.34,3.24-11.51,1.57a2.62,2.62,0,0,0-3.09,1.14c-1.52,2.34-4.06,2.76-6.37,3.56a108.16,108.16,0,0,1-13.35,3.75c-4.27.9-4.78-.52-5.67-4-6.65-25.78-16.18-50.37-32.46-71.74-16.06-21.09-34.33-40.35-52.28-59.8-22.86-24.75-48.25-46.9-74.4-68.14a205.42,205.42,0,0,0-60.31-34.55c-14.55-5.23-29.5-9.05-44.45-12.92-23-6-46.32-10.85-70.07-12.14A426.25,426.25,0,0,0,854,116.55c-20.93,2.43-42,4.08-62.76,7.78-22.06,3.93-44.2,7.51-65.1,16.19-17.19,7.14-34,15-50.72,23.28-37.84,18.69-70.12,45-98.62,75.54-29.58,31.71-48.76,69.4-57.65,112.19-4.56,22-9.46,43.8-12,66.12a162.37,162.37,0,0,1-3.79,22.07c-.51,2-.78,3.67-3.64,3.65-23.5-.17-47,.36-70.48-.46-13.86-.48-27.59-.62-41.29,1.43-9.92,1.48-19.47,4.26-28,9.75-7.12,4.56-11.15,11-10.47,19.62,1.06,13.6,5.32,26.32,11.29,38.48,5.79,11.78,12.37,23.19,16.75,35.63,8.83,25,16.42,50.49,24.05,75.92,11.41,38,27.82,73.61,51.81,105.53,8.6,11.44,17.87,22.31,26.79,33.46a321.11,321.11,0,0,1,33,49.31c11.18,21,24.17,41,32.88,63.21,4.84,12.38,9.83,24.7,16.48,36.27,8.63,15,17.64,29.78,28.21,43.53.84,1.09,2.47,2,.91,3.75-3.7,4.14-5.68,9.34-8.58,14-12.73,20.34-24.13,41.4-31.14,64.47-4.24,14-7.58,28.21-11.51,42.28-1.56,5.58-3.12,6.38-8.77,5-15-3.63-29.74-8.27-45-10.88-15.08-2.57-30-2.72-44,3.91-20.79,9.83-40.95,20.81-57.95,36.69a25,25,0,0,1-8.42,5.1c-12.47,4.73-25.33,8.3-37.22,14.7-10.79,5.82-22.34,10.22-33.49,15.39-7.06,3.27-14.32,6.17-20.67,10.81-19,13.83-38.14,27.39-56.86,41.53-21.91,16.57-44.34,32.62-64.91,50.75-26.73,23.56-51.84,49-77.71,73.49-1.79,1.7-1.82,2.93-.79,5.1,3.91,8.22,8.74,15.47,16.68,20.52,4.77,3,9.35,6.48,14.43,8.85,10.62,5,20.9,11.16,33.12,11.39,6.3.11,12.72,2.51,18.84.67q48.42-14.52,97-28.57c23.28-6.75,46.1-15,69.1-22.76,11-3.7,22.27-6.91,32.85-11.62,11.66-5.18,22.66-11.86,34-17.8a16.4,16.4,0,0,0,4.26-3.35c30.24-31.74,59.42-64.39,83.77-101,6.16-9.26,13.46-16.69,23.6-21.33,2.84-1.3,5.35-2.93,8.71-3.23,11.63-1,23.3-.71,34.93-1.59,8.31-.62,16.65-.66,25-1.07,2.58-.13,3.17.46,3.06,3.33-.39,9.81-1.26,19.56-2.16,29.34-2,21.39-2.88,42.87-4.56,64.3-.52,6.57-.59,12.86,1.8,19.15a27.45,27.45,0,0,1,1.51,9.33c.54,30.48,1.54,61,.83,91.45-.15,6.66-.82,13.31-.7,20,.24,12.65,1.22,25.28,1.26,37.93.08,24.33.27,48.61,2.31,72.9,1.3,15.34,6.87,29.08,13.41,42.55,4,8.32,9.74,9.52,18,5,1.21-2.2,3.28-3.69,4.53-5.91a80.71,80.71,0,0,1,15.35-20.16,42.75,42.75,0,0,0,9.34-12.85c6.62-13.63,14.81-26.36,22.41-39.42,1.27-3.24,2.68-6.44,3.79-9.74,4.38-13.06,10.31-25.6,13.42-39.07,5.08-22,9.61-44.17,14.85-66.15a106.88,106.88,0,0,0,1.77-42.56c-2.3-14-4.64-27.82-5.43-42-1.09-19.51-1.59-38.87,3.76-57.92a8.82,8.82,0,0,1,1.76-4q4.27-4.55,8.41-9.23c1.13-1.29,2-2,3.6-.41,3.39,3.38,6.81,6.79,10.5,9.84,5.75,4.77,10.31,11.06,16.85,14.71,9.23,5.15,18.31,10.62,28.1,14.72,16,6.7,32.79,9.48,49.91,10.83a61,61,0,0,1,6.42.76,95.48,95.48,0,0,0,26.33,1.7c13.16-1.2,25.49-6,38.06-9.68,3.31-3.38,7.86-4.18,12-5.71,10.45-3.83,20.91-7.65,32-9.12.63-.17,1.29-.29,1.9-.52,23.37-9,46.46-18.79,69.79-27.93,37.9-14.85,75.65-30,113.7-44.49,4.19-1.59,8.46-3,12.37-5.27q24.16-14,48.31-28.06a61.49,61.49,0,0,0,9.16-6c15.56-13.33,31.47-26.26,46-40.76,5.18-5.18,10.08-10.74,15.78-15.3,13-10.4,26.38-20.33,39.71-30.32a33.21,33.21,0,0,0,5.57-4.93c11.69-13.66,18.67-29.74,23.85-46.72,3.28-10.77,4.81-21.77,3.5-33-1.51-12.9-5.19-25.32-8.52-37.84-8-30.2-20.2-58.35-39-83.5-4.46-6-8.71-12.16-11.77-19.08a5.75,5.75,0,0,1-.14-5.11c10.35-24.71,17.6-50.45,25-76.13,7.57-26.15,15.08-52.32,25.91-77.39a226,226,0,0,0,14.23-45.55c3.08-15.46,6.29-30.94,11.87-45.75A603.76,603.76,0,0,0,1361,496c5.51-21.67,13.39-42.75,14.88-65.43C1377.16,410.92,1372.86,393.29,1361,377.61Zm-235.9,602.28c-11.67,20.79-28.18,39.33-49.08,55.08-41.35,31.17-95.88,48.34-153.55,48.34s-112.2-17.17-153.55-48.34c-20.9-15.75-37.41-34.29-49.08-55.08a142,142,0,0,1,0-141.33c11.67-20.8,28.18-39.33,49.08-55.08,41.35-31.17,95.88-48.34,153.55-48.34s112.2,17.17,153.55,48.34c20.9,15.75,37.41,34.28,49.08,55.08a141.95,141.95,0,0,1,0,141.33ZM730,637.27c0-21.92,23.26-39.69,52-39.69s52,17.77,52,39.69S810.65,677,782,677,730,659.19,730,637.27Zm273.11-9.11c0-21.92,23.26-39.68,52-39.68s52,17.76,52,39.68-23.26,39.69-52,39.69S1003.11,650.08,1003.11,628.16Zm234.33,36.11-56.88-11.38c8.45-42.21.61-84.18-22.09-118.18-20.7-31-51.48-52.57-84.44-59.12-28.94-5.76-60.27,14.61-81.46,32.71A302.61,302.61,0,0,0,950,553.71a73.87,73.87,0,0,1-4.59,7.61c-7.13,10.48-15.78,17-25.7,19.38-11.69,2.79-29.37,1.12-47.17-22.76l-.11-.14c-4.33-5.37-30.26-24.08-68.45-38.12-38.55-14.17-72.32-16.79-92.65-7.18-37,17.49-52.82,70.12-59.57,111.19-8.08,49.18-5.23,94.35-5.2,94.8l-57.87,3.89a523.45,523.45,0,0,1,5.65-107c5.44-33.66,14.27-62.85,26.24-86.76,16.29-32.52,38.48-55.6,66-68.59,45-21.26,100.23-8.67,138.66,5.63,33.65,12.52,65.43,30.47,83.51,46.61a361,361,0,0,1,45.21-47.23c44.71-38.54,90.17-54.57,131.45-46.37,48,9.53,92.19,40.08,121.38,83.82C1238,549.42,1248.93,606.86,1237.44,664.27Z" transform="translate(-54.9 -84.92)" style="fill:#fff;stroke:#1d1d1b;stroke-miterlimit:10;stroke-width:58px"/></svg>');
      add_menu_page(
        'Monkey in Silk settings',
        'Monkey in Silk',
        'manage_options',
        'monkeyinsilk',
        'monkeyinsilk_settings_page_markup',
        'data:image/svg+xml;base64,' . $svg,
        100
    );

}
add_action( 'admin_menu', 'monkeyinsilk_settings_page' );

function monkeyinsilk_settings_page_markup()
{
    // Double check user capabilities
    if ( !current_user_can('manage_options') ) {
      return;
    }
?>
    <div class="wrap">
      <h1><?php esc_html_e( get_admin_page_title() ); ?></h1>
      
      <form method="post" action="options.php">
          <?php settings_fields('monkeyinsilk_settings'); ?>
          <?php do_settings_sections('monkeyinsilk'); ?>
          <?php submit_button(); ?>
      </form>      
    </div>
<?php
}

function monkeyinsilk_add_settings_link($links) {
    $settings_link = '<a href="admin.php?page=monkeyinsilk">'.__('Settings','monkeyinsilk').'</a>';
    array_push($links, $settings_link);
    return $links;
}

$filter_name = "plugin_action_links_".MONKEYINSILK_BASENAME;
add_filter($filter_name,'monkeyinsilk_add_settings_link');

?>